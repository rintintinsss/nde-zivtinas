<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fish Quiz Game</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex flex-col items-center justify-center min-h-screen bg-blue-100 p-4">

<h1 class="text-3xl font-bold mb-6 text-blue-800">üêü NƒÅkamƒÅs Dienas Zivju Eksperti üêü</h1>

<!-- Mode selection -->
<div class="bg-white shadow-lg rounded-2xl p-6 max-w-md w-full text-center mb-6">
  <p class="text-blue-900 font-semibold mb-2">Select Mode:</p>
  <label class="mr-4 text-blue-800 font-semibold">
    <input type="radio" name="mode" value="normal"> Normal
  </label>
  <label class="text-blue-800 font-semibold">
    <input type="radio" name="mode" value="easy"> Easy
  </label>
  <div class="mt-4">
    <button id="startGameBtn" class="bg-green-400 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-xl" disabled>Start Game</button>
  </div>
</div>

<!-- Game container -->
<div id="gameContainer" class="bg-white shadow-lg rounded-2xl p-6 max-w-md w-full text-center hidden">
  <img id="fishImage" src="" alt="Fish" class="w-full h-auto max-h-64 object-contain rounded-xl mb-4 border border-blue-300">
  <div id="options" class="grid grid-cols-2 gap-4"></div>
  <p id="feedback" class="mt-4 text-lg font-semibold"></p>
  <p id="score" class="mt-2 text-blue-900 font-semibold"></p>
  <button id="newGameBtn" class="mt-4 bg-green-400 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-xl hidden">New Game</button>
  <button id="nextButton" style="display:none;">Next</button>
</div>

<script>
// Fish database with some marked as easy
const fishDB = [
  {name: "Upes nƒìƒ£is", image: "https://www.latvijasdaba.lv/content/zivis/lampetra-fluviatilis-l-420x300.jpg", easy: true, family: "Petromyzontidae"},
  {name: "Strauta nƒìƒ£is", image: "https://www.latvijasdaba.lv/content/zivis/lampetra-planeri-bloch-420x300.jpg", easy: true, family: "Petromyzontidae"},
  {name: "J≈´ras nƒìƒ£is", image: "https://www.latvijasdaba.lv/content/zivis/petromyzon-marinus-l-420x300.jpg", easy: true, family: "Petromyzontidae"},
  {name: "Sibƒ´rijas store", image: "https://www.latvijasdaba.lv/content/zivis/acipenser-baeri-brandt-420x300.jpg", family: "Acipenseridae"},
  {name: "Krievu store", image: "https://www.latvijasdaba.lv/content/zivis/acipenser-guldenstadti-brandt-420x300.jpg", family: "Acipenseridae"},
  {name: "Store", image: "https://www.latvijasdaba.lv/content/zivis/acipenser-sturio-l-420x300.jpg", family: "Acipenseridae"},
  {name: "Sterlete", image: "https://www.latvijasdaba.lv/content/zivis/acipenser-ruthenus-l-420x300.jpg", family: "Acipenseridae"},
  {name: "Beluga", image: "https://www.latvijasdaba.lv/content/zivis/huso-huso-l-420x300.jpg", family: "Acipenseridae"},
  {name: "Aloza", image: "https://www.latvijasdaba.lv/content/zivis/alosa-alosa-l-420x300.jpg", family: "Clupeidae"},
  {name: "Palede", image: "https://www.latvijasdaba.lv/content/zivis/alosa-fallax-lacep-420x300.jpg", easy: true, family: "Clupeidae"},
  {name: "Re≈Üƒ£e", image: "https://www.latvijasdaba.lv/content/zivis/clupea-harengus-membras-l-420x300.jpg", easy: true, family: "Clupeidae"},
  {name: "Brƒìtli≈Üa", image: "https://www.latvijasdaba.lv/content/zivis/sprattus-sprattus-balticus-schneider-420x300.jpg", easy: true, family: "Clupeidae"},
  {name: "An≈°ovs", image: "https://www.latvijasdaba.lv/content/zivis/engraulis-encrasicholus-l-420x300.jpg", family: "Engraulidae"},
  {name: "Kuprlasis", image: "https://www.latvijasdaba.lv/content/zivis/oncorhynchus-gorbuscha-walb-420x300.jpg", family: "Salmonidae"},
  {name: "Ketlasis", image: "https://www.latvijasdaba.lv/content/zivis/oncorhynchus-keta-walb-420x300.jpg", family: "Salmonidae"},
  {name: "Ki≈æuƒçs", image: "https://www.latvijasdaba.lv/content/zivis/oncorhynchus-kisutch-walb-420x300.jpg", family: "Salmonidae"},
  {name: "Varavƒ´ksnes forele", image: "https://www.latvijasdaba.lv/content/zivis/oncorhynchus-mykiss-walb-420x300.jpg", family: "Salmonidae"},
  {name: "Lasis", image: "https://www.latvijasdaba.lv/content/zivis/salmo-salar-l-420x300.jpg", easy: true, family: "Salmonidae"},
  {name: "Strauta forele", image: "https://www.latvijasdaba.lv/content/zivis/salmo-trutta-fario-l-420x300.jpg", easy: true, family: "Salmonidae"},
  {name: "Taimi≈Ü≈°", image: "https://www.latvijasdaba.lv/content/zivis/salmo-trutta-l-B-420x300.jpg", easy: true, family: "Salmonidae"},
  {name: "Arktikas palija", image: "https://www.latvijasdaba.lv/content/zivis/salvelinus-alpinus-l-420x300.jpg", family: "Salmonidae"},
  {name: "Avota palija", image: "https://www.latvijasdaba.lv/content/zivis/salvelinus-fontinalis-mitch-420x300.jpg", family: "Salmonidae"},
  {name: "Repsis", image: "https://www.latvijasdaba.lv/content/zivis/coregonus-albula-l-420x300.jpg", easy: true, family: "Salmonidae"},
  {name: "BaikƒÅla omulis", image: "https://www.latvijasdaba.lv/content/zivis/coregonus-autumnalis-migratorius-georgi-420x300.jpg", family: "Salmonidae"},
  {name: "Sƒ´ga", image: "https://www.latvijasdaba.lv/content/zivis/coregonus-lavaretus-l-420x300.jpg", easy: true, family: "Salmonidae"},
  {name: "Muksuns", image: "https://www.latvijasdaba.lv/content/zivis/coregonus-muksun-pall-420x300.jpg", family: "Salmonidae"},
  {name: "ƒåirs", image: "https://www.latvijasdaba.lv/content/zivis/coregonus-nasus-pall-420x300.jpg", family: "Salmonidae"},
  {name: "Pelede", image: "https://www.latvijasdaba.lv/content/zivis/coregonus-peled-gmelin-420x300.jpg", family: "Salmonidae"},
  {name: "Nelma", image: "https://www.latvijasdaba.lv/content/zivis/stenodus-leucichthys-nelma-pall-420x300.jpg", family: "Salmonidae"},
  {name: "Alata", image: "https://www.latvijasdaba.lv/content/zivis/thymallus-thymallus-l-420x300.jpg", easy: true, family: "Salmonidae"},
  {name: "Salaka", image: "https://www.latvijasdaba.lv/content/zivis/osmerus-eperlanus-l-420x300.jpg", easy: true, family: "Osmeridae"},
  {name: "Lƒ´daka", image: "https://www.latvijasdaba.lv/content/zivis/esox-lucius-l-420x300.jpg", easy: true, family: "Esocidae"},
  {name: "Zutis", image: "https://www.latvijasdaba.lv/content/zivis/anguilla-anguilla-l-420x300.jpg", easy: true, family: "Anguillidae"},
  {name: "J≈´raszutis", image: "https://www.latvijasdaba.lv/content/zivis/conger-conger-l-420x300.jpg", family: "Congridae"},
  {name: "SpƒÅre", image: "https://www.latvijasdaba.lv/content/zivis/abramis-ballerus-l-420x300.jpg", family: "Cyprinidae"},
  {name: "Plaudis", image: "https://www.latvijasdaba.lv/content/zivis/abramis-brama-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Pavƒ´ƒ∑e", image: "https://www.latvijasdaba.lv/content/zivis/alburnoides-bipunctatus-bloch-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Vƒ´ƒ∑e", image: "https://www.latvijasdaba.lv/content/zivis/alburnus-alburnus-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Raibais platpieris", image: "https://www.latvijasdaba.lv/content/zivis/aristichthys-nobilis-rich-420x300.jpg", family: "Cyprinidae"},
  {name: "Salate", image: "https://www.latvijasdaba.lv/content/zivis/aspius-aspius-l-420x300.jpg", easy: true, family: "Esocidae"},
  {name: "Barbe", image: "https://www.latvijasdaba.lv/content/zivis/barbus-barbus-l-420x300.jpg", family: "Cyprinidae"},
  {name: "Plicis", image: "https://www.latvijasdaba.lv/content/zivis/blicca-bjoerkna-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Sudrabkar≈´sa", image: "https://www.latvijasdaba.lv/content/zivis/carassius-auratus-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Kar≈´sa", image: "https://www.latvijasdaba.lv/content/zivis/carassius-carassius-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Apak≈°mute", image: "https://www.latvijasdaba.lv/content/zivis/chondrostoma-nasus-l-420x300.jpg", family: "Cyprinidae"},
  {name: "Baltais am≈´rs", image: "https://www.latvijasdaba.lv/content/zivis/ctenopharyngodon-idella-valen-420x300.jpg", family: "Cyprinidae"},
  {name: "Karpa", image: "https://www.latvijasdaba.lv/content/zivis/cyprinus-carpio-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Grundulis", image: "https://www.latvijasdaba.lv/content/zivis/gobio-gobio-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Baltais platpieris", image: "https://www.latvijasdaba.lv/content/zivis/hypophthalmichthys-molitrix-val-420x300.jpg", family: "Cyprinidae"},
  {name: "Ausleja", image: "https://www.latvijasdaba.lv/content/zivis/leucaspius-delineatus-heck-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Sapals", image: "https://www.latvijasdaba.lv/content/zivis/leuciscus-cephalus-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "ƒÄlants", image: "https://www.latvijasdaba.lv/content/zivis/leuciscus-idus-l-420x300.jpg", family: "Cyprinidae"},
  {name: "Baltais sapals", image: "https://www.latvijasdaba.lv/content/zivis/leuciscus-leuciscus-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Melnais am≈´rs", image: "https://www.latvijasdaba.lv/content/zivis/mylopharyngodon-piceus-rich-420x300.jpg", family: "Cyprinidae"},
  {name: "Kaze", image: "https://www.latvijasdaba.lv/content/zivis/pelecus-cultratus-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Mailƒ´te", image: "https://www.latvijasdaba.lv/content/zivis/phoxinus-phoxinus-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Am≈´ras ƒçebaƒçeks", image: "https://www.latvijasdaba.lv/content/zivis/pseudorasbora-parva-schleg-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Spidiƒºƒ∑is", image: "https://www.latvijasdaba.lv/content/zivis/rhodeus-sericeus-bloch-420x300.jpg", family: "Cyprinidae"},
  {name: "Rauda", image: "https://www.latvijasdaba.lv/content/zivis/rutilus-rutilus-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Rudulis", image: "https://www.latvijasdaba.lv/content/zivis/scardinius-erythrophthalmus-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Lƒ´nis", image: "https://www.latvijasdaba.lv/content/zivis/tinca-tinca-l-420x300.jpg", easy: true, family: "Tincidae"},
  {name: "Vimba", image: "https://www.latvijasdaba.lv/content/zivis/vimba-vimba-l-420x300.jpg", easy: true, family: "Cyprinidae"},
  {name: "Akme≈Ügrauzis", image: "https://www.latvijasdaba.lv/content/zivis/cobitis-taenia-l-420x300.jpg", easy: true, family: "Cobitidae"},
  {name: "Pƒ´kste", image: "https://www.latvijasdaba.lv/content/zivis/misgurnus-fossilis-l-420x300.jpg", family: "Cobitidae"},
  {name: "BƒÅrdainais akme≈Ügrauzis", image: "https://www.latvijasdaba.lv/content/zivis/noemacheilus-barbatulus-l-420x300.jpg", easy: true, family: "Cobitidae"},
  {name: "Ziemeƒºu zeltainais akme≈Ügrauzis", image: "https://www.latvijasdaba.lv/content/zivis/sabanejewia-baltica-witkowski-420x300.jpg", easy: true, family: "Cobitidae"},
  {name: "Vƒìjzivs", image: "https://www.latvijasdaba.lv/content/zivis/belone-belone-l-420x300.jpg", easy: true, family: "Belonidae"},
  {name: "Sams", image: "https://www.latvijasdaba.lv/content/zivis/silurus-glanis-l-420x300.jpg", easy: true, family: "Siluridae"},
  {name: "J≈´rasvƒìdzele", image: "https://www.latvijasdaba.lv/content/zivis/enchelyopus-cimbrius-l-420x300.jpg", family: "Zoarcidae"},
  {name: "Menca", image: "https://www.latvijasdaba.lv/content/zivis/gadus-morhua-callarias-l-420x300.jpg", easy: true, family: "Gadidae"},
  {name: "Vƒìdzele", image: "https://www.latvijasdaba.lv/content/zivis/lota-lota-l-420x300.jpg", easy: true, family: "Lotidae"},
  {name: "Pik≈°a", image: "https://www.latvijasdaba.lv/content/zivis/melanogrammus-aeglefinus-l-420x300.jpg", family: "Gadidae"},
  {name: "Merlangs", image: "https://www.latvijasdaba.lv/content/zivis/merlangius-merlangus-l-420x300.jpg", family: "Gadidae"},
  {name: "Pollaks", image: "https://www.latvijasdaba.lv/content/zivis/pollachius-pollachius-l-420x300.jpg", family: "Gadidae"},
  {name: "Saida", image: "https://www.latvijasdaba.lv/content/zivis/pollachius-virens-l-420x300.jpg", family: "Gadidae"},
  {name: "Trƒ´sadatu stagars", image: "https://www.latvijasdaba.lv/content/zivis/gasterosteus-aculeatus-l-420x300.jpg", easy: true, family: "Gasterosteidae"},
  {name: "Devi≈Üadatu stagars", image: "https://www.latvijasdaba.lv/content/zivis/pungitius-pungitius-l-420x300.jpg", easy: true, family: "Gasterosteidae"},
  {name: "J≈´rasstagars", image: "https://www.latvijasdaba.lv/content/zivis/spinachia-spinachia-l-420x300.jpg", family: "Gasterosteidae"},
  {name: "ƒå≈´skzivs", image: "https://www.latvijasdaba.lv/content/zivis/nerophis-ophidion-l-420x300.jpg", easy: true, family: "Ophichthidae"},
  {name: "Gardeguna adatzivs", image: "https://www.latvijasdaba.lv/content/zivis/syngnathus-typhle-l-420x300.jpg", easy: true, family: "Syngnathidae"},
  {name: "J≈´rasasaris", image: "https://www.latvijasdaba.lv/content/zivis/dicentrarchus-labrax-l-420x300.jpg", family: "Moronidae"},
  {name: "Svƒ´trainais asaris", image: "https://www.latvijasdaba.lv/content/zivis/morone-saxatilis-walb-420x300.jpg", family: "Moronidae"},
  {name: "ƒ∂ƒ´sis", image: "https://www.latvijasdaba.lv/content/zivis/gymnocephalus-cernua-l-420x300.jpg", easy: true, family: "Percidae"},
  {name: "Asaris", image: "https://www.latvijasdaba.lv/content/zivis/perca-fluviatilis-l-420x300.jpg", easy: true, family: "Percidae"},
  {name: "Zandarts", image: "https://www.latvijasdaba.lv/content/zivis/stizostedion-lucioperca-l-420x300.jpg", easy: true, family: "Percidae"},
  {name: "T≈´bƒ´te", image: "https://www.latvijasdaba.lv/content/zivis/ammodytes-tobianus-l-420x300.jpg", easy: true, family: "Ammodytidae"},
  {name: "Nigli≈Ü≈°", image: "https://www.latvijasdaba.lv/content/zivis/hyperoplus-lanceolatus-le-sauvage-420x300.jpg", easy: true, family: "Ammodytidae"},
  {name: "Pelamida", image: "https://www.latvijasdaba.lv/content/zivis/sarda-sarda-bloch-420x300.jpg", family: "Scombridae"},
  {name: "Makrele", image: "https://www.latvijasdaba.lv/content/zivis/scomber-scomber-l-420x300.jpg", family: "Scombridae"},
  {name: "Zobenzivs", image: "https://www.latvijasdaba.lv/content/zivis/xiphias-gladius-l-420x300.jpg", family: "Xiphiidae"},
  {name: "Melnais j≈´rasgrundulis", image: "https://www.latvijasdaba.lv/content/zivis/gobius-niger-l-420x300.jpg", family: "Gobiidae"},
  {name: "Divplankumu j≈´rasgrundulis", image: "https://www.latvijasdaba.lv/content/zivis/globiusculus-flavescens-fabr-420x300.jpg", family: "Gobiidae"},
  {name: "Apaƒºais j≈´rasgrundulis", image: "https://www.latvijasdaba.lv/content/zivis/neogobius-melanostomus-pallas-420x300.jpg", easy: true, family: "Gobiidae"},
  {name: "J≈´rasgrundulis", image: "https://www.latvijasdaba.lv/content/zivis/pomatoschistus-microps-kryer-420x300.jpg", easy: true, family: "Gobiidae"},
  {name: "Mazais j≈´rasgrundulis", image: "https://www.latvijasdaba.lv/content/zivis/pomatoschistus-minutus-pallas-420x300.jpg", easy: true, family: "Gobiidae"},
  {name: "Lentzivs", image: "https://www.latvijasdaba.lv/content/zivis/lumpenus-lampretaeformis-walb-420x300.jpg", family: "Zoarcidae"},
  {name: "Taukzivs", image: "https://www.latvijasdaba.lv/content/zivis/pholis-gunnellus-l-420x300.jpg", family: "Pholidae"},
  {name: "Lucƒ´tis", image: "https://www.latvijasdaba.lv/content/zivis/zoarces-viviparus-l-420x300.jpg", easy: true, family: "Zoarcidae"},
  {name: "Biezl≈´pu kefale", image: "https://www.latvijasdaba.lv/content/zivis/chelon-labrosus-risso-420x300.jpg", family: "Mugilidae"},
  {name: "PlƒÅnl≈´pu kefale", image: "https://www.latvijasdaba.lv/content/zivis/liza-ramada-risso-420x300.jpg", family: "Mugilidae"},
  {name: "Eleotriss", image: "https://www.latvijasdaba.lv/content/zivis/hypseleotris-swinhonis-gunther-420x300.jpg", family: "Eleotridae"},
  {name: "Rotans", image: "https://www.latvijasdaba.lv/content/zivis/percottus-glehni-dyb-420x300.jpg", easy: true, family: "Percidae"},
  {name: "Stavrida", image: "https://www.latvijasdaba.lv/content/zivis/trachurus-trachurus-l-420x300.jpg", family: "Carangidae"},
  {name: "Vilkzivs", image: "https://www.latvijasdaba.lv/content/zivis/anarhichas-lupus-l-420x300.jpg", family: "Anarhichadidae"},
  {name: "Platgalve", image: "https://www.latvijasdaba.lv/content/zivis/cottus-gobio-l-420x300.jpg", easy: true, family: "Cottidae"},
  {name: "RaibƒÅ platgalve", image: "https://www.latvijasdaba.lv/content/zivis/cottus-poecilopus-heck-420x300.jpg", family: "Cottidae"},
  {name: "Ziemeƒºu buƒºƒºzivs", image: "https://www.latvijasdaba.lv/content/zivis/myoxocephalus-scorpius-l-420x300.jpg", easy: true, family: "Cottidae"},
  {name: "J≈´ras dzelo≈Ügalve", image: "https://www.latvijasdaba.lv/content/zivis/taurulus-bubalis-euphrasen-420x300.jpg", family: "Cottidae"},
  {name: "ƒåetrragu buƒºƒºzivs", image: "https://www.latvijasdaba.lv/content/zivis/triglopsis-quadricornis-l-420x300.jpg", easy: true, family: "Cottidae"},
  {name: "ƒÄƒ∑degunis", image: "https://www.latvijasdaba.lv/content/zivis/agonus-cataphractus-l-420x300.jpg", family: "Agonidae"},
  {name: "J≈´ras zaƒ∑zivs", image: "https://www.latvijasdaba.lv/content/zivis/cyclopterus-lumpus-l-420x300.jpg", family: "Cyclopteridae"},
  {name: "Pl≈´k≈°≈Üzivs", image: "https://www.latvijasdaba.lv/content/zivis/liparis-liparis-ekstrom-420x300.jpg", family: "Liparidae"},
  {name: "Akme≈Üplekste", image: "https://www.latvijasdaba.lv/content/zivis/psetta-maxima-l-420x300.jpg", easy: true, family: "Pleuronectidae"},
  {name: "Gludais rombs", image: "https://www.latvijasdaba.lv/content/zivis/scophthalmus-rhombus-l-420x300.jpg", family: "Scophthalmidae"},
  {name: "GludƒÅ plekste", image: "https://www.latvijasdaba.lv/content/zivis/limanda-limanda-l-420x300.jpg", family: "Pleuronectidae"},
  {name: "Plekste", image: "https://www.latvijasdaba.lv/content/zivis/platichthys-flesus-l-420x300.jpg", easy: true, family: "Pleuronectidae"},
  {name: "J≈´ras zeltplekste", image: "https://www.latvijasdaba.lv/content/zivis/pleuronectes-platessa-l-420x300.jpg", family: "Pleuronectidae"}
];

let currentFish = {};
let usedFishIndices = [];
let score = 0;
let moves = 0;
const maxMoves = 10;
let selectedMode = "normal";

const gameContainer = document.getElementById("gameContainer");
const fishImage = document.getElementById("fishImage");
const optionsContainer = document.getElementById("options");
const feedback = document.getElementById("feedback");
const scoreDisplay = document.getElementById("score");
const newGameBtn = document.getElementById("newGameBtn");
const nextButton = document.getElementById("nextButton");
const startGameBtn = document.getElementById("startGameBtn");
const modeRadios = document.querySelectorAll('input[name="mode"]');

// Enable start button once a mode is selected
modeRadios.forEach(radio => {
  radio.addEventListener('change', () => {
    selectedMode = document.querySelector('input[name="mode"]:checked').value;
    startGameBtn.disabled = false;
  });
});

// Shuffle array utility
function shuffleArray(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function loadFish() {
  if (moves >= maxMoves) {
    endGame();
    return;
  }

  feedback.textContent = "";

  // Filter fish pool based on selected mode
  let pool = selectedMode === "easy" ? fishDB.filter(f => f.easy) : fishDB;

  if (pool.length === 0) {
    feedback.textContent = "No fish available for this mode!";
    return;
  }

  // Select a fish not used yet
  let index;
  do {
    index = Math.floor(Math.random() * pool.length);
  } while (usedFishIndices.includes(index) && usedFishIndices.length < pool.length);

  usedFishIndices.push(index);
  currentFish = pool[index];
  fishImage.src = currentFish.image;

  // Select 3 other random fishes from the same pool
let wrongOptions = pool.filter((_, i) => i !== index);

// Ensure at least one wrong option shares the same family
const sameFamilyOptions = wrongOptions.filter(f => f.family === currentFish.family);
let selectedFamilyOption = [];
if (sameFamilyOptions.length > 0) {
  selectedFamilyOption.push(sameFamilyOptions[Math.floor(Math.random() * sameFamilyOptions.length)]);
}

// Fill remaining options with random ones
let remainingOptions = wrongOptions.filter(f => !selectedFamilyOption.includes(f));
remainingOptions = shuffleArray(remainingOptions).slice(0, 3 - selectedFamilyOption.length);

const allOptions = shuffleArray([currentFish, ...selectedFamilyOption, ...remainingOptions]);
  optionsContainer.innerHTML = "";
  allOptions.forEach(f => {
    const btn = document.createElement("button");
    btn.textContent = f.name;
    btn.className = "bg-blue-200 hover:bg-blue-300 text-blue-900 font-semibold py-2 px-4 rounded-xl";
    btn.onclick = () => checkAnswer(f.name);
    optionsContainer.appendChild(btn);
  });

  scoreDisplay.textContent = `Score: ${score} | Question: ${moves + 1}/${maxMoves}`;
}

function checkAnswer(selected) {
  // Disable option buttons to prevent multiple clicks
  Array.from(optionsContainer.children).forEach(btn => btn.disabled = true);

  if (selected === currentFish.name) {
    feedback.textContent = "‚úÖ Correct!";
    feedback.className = "text-green-600 font-semibold mt-4";
    score++;
  } else {
    feedback.textContent = `‚ùå Wrong! Correct: ${currentFish.name}`;
    feedback.className = "text-red-600 font-semibold mt-4";
  }

  moves++;
  scoreDisplay.textContent = `Score: ${score} | Question: ${moves}/${maxMoves}`;

  // Show Next button
  nextButton.style.display = "inline-block";
  nextButton.onclick = function() {
    nextButton.style.display = "none";
    loadFish();
  };
}

function endGame() {
  feedback.textContent = `üèÅ Game over! Final score: ${score}/${maxMoves}`;
  feedback.className = "text-purple-700 font-bold mt-4";
  optionsContainer.innerHTML = "";
  newGameBtn.classList.remove("hidden");
}

function newGame() {
  score = 0;
  moves = 0;
  usedFishIndices = [];
  newGameBtn.classList.add("hidden");
  loadFish();
}

// Start Game button
startGameBtn.onclick = function() {
  document.querySelector('.bg-white.shadow-lg.rounded-2xl.p-6.mb-6').style.display = 'none'; // hide mode selection
  gameContainer.classList.remove("hidden");
  newGame(); // start the game
};

newGameBtn.onclick = newGame;
</script>
</body>
</html>
